# A C# Developer's Handbook

The focus of this document is on providing a reference for writing C#. It includes naming, structural and formatting conventions as well as best practices for writing clean, safe and maintainable code.

Many of the best practices and conventions apply equally well to other languages.

1. [Goals](#goals)
1. [Scope](#scope)
1. [Environment](#environment)
1. [Improvements](#improvements)
1. [In Practice](#in-practice)
1. [Table of Contents](#table-of-contents)
    1. [Overview](#overview)
    1. [Naming](#naming)
    1. [Formatting](#formatting)
    1. [Usage](#usage)
    1. [Best Practices](#best-practices)

## Goals

This handbook has the following aims and guiding principles:

*	Increase readability and maintainability with a unified style.
*	Minimize complexity with proven design principles
*	Increase code safety and prevent hard-to-find errors through best practices.
*	Maximize effectiveness of coding tools.
* Accommodate IDE- or framework-generated code.
* Provide justifications and examples for rules.

## Scope

This handbook includes:

* General programming advice and best practices
* General formatting and style recommendations
* C#-specific sections

## Environment

The recommended environment and tools at this time are:

* _Microsoft Visual Studio 2017_
* _JetBrains ReSharper 2016.3.2_
* _StyleCop 4.7_
* _StyleCop by JetBrains_ extension for ReSharper
* _Cyclomatic Complexity_ extension for ReSharper
* _EditorConfig_
* _C# 7.0_

For older versions of Visual Studio and C#, use what you can or refer to older versions of this handbook.

## Improvements

This document is a work-in-progress. Please speak up or contribute if you think there is something missing.

*	If a guideline is not sufficiently clear, recommend a clearer formulation.
*	If you don’t like a guideline, try to get it changed or removed, but don’t just ignore it. Your code reviewer is most likely unaware that you are special and not subject to the rules.

## In Practice

### Applying the Guidelines

* Unless otherwise noted, these guidelines are not optional, nor are they up to interpretation.
*	A reviewer always has the right to correct mistakes and aberrations, but is not obligated to do so in every review.
*	Please note issues with the guidelines during a review. These changes should flow into the guidelines if enough parties agree.

The handbook defines the goal. Use iterations and refactoring to incrementally bring the code closer to full compliance.

### Fixing Problems in Code

Fix non-conforming code at the earliest opportunity.

*	Fix small and localized errors immediately, in a "cleanup" commit.
*	Always use a separate commit to rename or move files.
*	Create an issue for larger problems that cannot be fixed quickly.

### Working with an IDE

Modern IDEs generate code; this is very helpful and saves a lot of work. Within reason, the generated code should satisfy the coding guidelines. If the generated code is not under your control, then it's OK to turn a blind eye to style infractions.

*	Configure your IDE to produce code that is as close to the guidelines as possible. StyleCop and ReSharper are an enormous help.
*	Update names for visual-design elements and event handlers manually, if needed.
*	Write code generators to produce conforming code.
*	Do not update code generated by tools not under your control (e.g. *.Designer files).
*	Use “Format Document” to reformat auto-generated code.
*	Use the highest warning level available (level 4 in Visual Studio) and address all warnings (either by fixing the code or explicitly ignoring them).

### Settings files

This repository includes configuration files that set up the rules outlined in this handbook for _StyleCop_ and _ReSharper_ and _EditorConfig_.

## Table of Contents

### [Overview](0_overview.md)

1. [Terminology](0_overview.md#terminology)
1. [History](0_overview.md#history)
1. [References](0_overview.md#referenced-documents)

### [Naming](1_naming.md)

1. [Characters](1_naming.md#characters)
1. [Words](1_naming.md#words)
1. [Semantics](1_naming.md#semantics)
1. [Case](1_naming.md#case)
1. [Grouping](1_naming.md#grouping)
1. [Algorithm](1_naming.md#algorithm)
1. [Structure](1_naming.md#structure)
    1. [Assemblies](1_naming.md#assemblies)
    1. [Files](1_naming.md#files)
    1. [Namespaces](1_naming.md#namespaces)
1. [Types](1_naming.md#types)
    1. [Classes](1_naming.md#classes)
    1. [Interfaces](1_naming.md#interfaces)
    1. [`enums`](1_naming.md#enumerations)
    1. [Generic Parameters](1_naming.md#generic-parameters)
    1. [Sequences and Lists](1_naming.md#sequences-and-lists)
1. [Members](1_naming.md#members)
    1. [Properties](1_naming.md#properties)
    1. [Methods](1_naming.md#methods)
    1. [Extension Methods](1_naming.md#extension-methods)
    1. [Parameters](1_naming.md#parameters)
    1. [Lambdas](1_naming.md#lambdas)
    1. [Events](1_naming.md#events)
    1. [Delegates](1_naming.md#delegates)
1. [Statements and Expressions](1_naming.md#statements-and-expressions)
    1. [Local Variables](1_naming.md#local-variables)
    1. [Return Values](1_naming.md#return-values)
    1. [Compiler Variables](1_naming.md#compiler-variables)

### [Formatting](2_formatting.md)

1. [Whitespace and Symbols](2_formatting.md#whitespace-and-symbols)
    1. [Blank Lines](2_formatting.md#blank-lines)
    1. [Line Breaks](2_formatting.md#line-breaks)
    1. [Indenting and Spacing](2_formatting.md#indenting-and-spacing)
    1. [Braces](2_formatting.md#braces)
    1. [Parentheses](2_formatting.md#parentheses)
1. [Language Elements](2_formatting.md#language-elements)
    1. [Methods](2_formatting.md#methods)
    1. [Constructors](2_formatting.md#constructors)
    1. [Initializers](2_formatting.md#initializers)
    1. [Lambdas](2_formatting.md#lambdas)
    1. [Multi-line Text](2_formatting.md#multi-line-text)
    1. [`return` Statements](2_formatting.md#return-statements)
    1. [`switch` Statements](2_formatting.md#switch-statements)
    1. [Ternary & Coalescing Operators](2_formatting.md#ternary-and-coalescing-operators)
    1. [Comments](2_formatting.md#comments)
    1. [Regions](2_formatting.md#regions)

### [Usage](3_usage.md)

1. [Structure](3_usage.md#structure)
    1. [Assemblies](3_usage.md#assemblies)
    1. [Files](3_usage.md#files)
    1. [Namespaces](3_usage.md#namespaces)
1. [Types](3_usage.md#types)
    1. [Classes](3_usage.md#classes)
        1. [Abstract](3_usage.md#abstract-classes)
        1. [Static](3_usage.md#static-classes)
        1. [Inner](3_usage.md#inner-classes)
        1. [Partial](3_usage.md#partial-classes)
    1. [Interfaces](3_usage.md#interfaces)
    1. [Generics](3_usage.md#generics)
    1. [`structs`](3_usage.md#structs)
    1. [`enums`](3_usage.md#enumerations)
1. [Members](3_usage.md#members)
    1. [Modifiers](3_usage.md#modifiers)
        1. [`sealed`](3_usage.md#sealed)
        1. [`internal`](3_usage.md#internal)
    1. [Declaration Order](3_usage.md#declaration-order)
    1. [Constants](3_usage.md#constants)
    1. [Constructors](3_usage.md#constructors)
    1. [Properties](3_usage.md#properties)
    1. [Indexers](3_usage.md#indexers)
    1. [Methods](3_usage.md#methods)
    1. [Extension Methods](3_usage.md#extension-methods)
    1. [Parameters](3_usage.md#parameters)
    1. [Optional Parameters](3_usage.md#optional-parameters)
    1. [Expression-bodied Members](3_usage.md#expression-bodied-members)
    1. [`tuples`](3_usage.md#tuples)
    1. [Overloads](3_usage.md#overloads)
    1. [Virtual](3_usage.md#virtual)
    1. [`new` Properties](3_usage.md#new-properties)
    1. [Event Handlers](3_usage.md#event-handlers)
    1. [Operators](3_usage.md#operators)
    1. [`ref` Returns and Properties](3_usage.md#ref-returns-and-properties)
1. [Statements and Expressions](3_usage.md#statements-and-expressions)
    1. [`base`](3_usage.md#base)
    1. [`this`](3_usage.md#this)
    1. [Value Types](3_usage.md#value-types)
    1. [Strings](3_usage.md#strings)
    1. [Interpolation](3_usage.md#interpolation)
    1. [`nameof`](3_usage.md#nameof)
    1. [Resource Strings](3_usage.md#resource-strings)
    1. [Floating Point and Integral Types](3_usage.md#floating-point-and-integral-types)
    1. [Local Variables](3_usage.md#local-variables)
    1. [Local Functions](3_usage.md#local-functions)
    1. [`var`](3_usage.md#var)
    1. [`out` variables](3_usage.md#out-variables)
    1. [Loops](3_usage.md#loops)
    1. [Conditions](3_usage.md#conditions)
    1. [`switch`](3_usage.md#switch-statements)
    1. [Pattern-matching](3_usage.md#pattern-matching)
    1. [`continue`](3_usage.md#continue-statements)
    1. [`return`](3_usage.md#return-statements)
    1. [`goto`](3_usage.md#goto-statements)
    1. [`unsafe`](3_usage.md#unsafe-blocks)
    1. [Ternary and Coalescing Operators](3_usage.md#ternary-and-coalescing-operators)
    1. [Null-conditional Operator](3_usage.md#null-conditional-operator)
    1. [`throw`-Expressions](3_usage.md#throw-expressions)
    1. [Lambdas](3_usage.md#lambdas)
    1. [System.Linq](3_usage.md#systemlinq)
    1. [Casting](3_usage.md#casting)
    1. [`checked`](3_usage.md#checked)
    1. [Compiler Variables](3_usage.md#compiler-variables)
    1. [Comments](3_usage.md#comments)

### [Best Practices](4_design.md)

1. [Design](4_design.md)
    1. [Abstractions](4_design.md#abstractions)
    1. [Inheritance vs. Composition](4_design.md#inheritance-vs-composition)
    1. [Interfaces vs. Abstract Classes](4_design.md#interfaces-vs-abstract-classes)
    1. [Open vs. Closed APIs](4_design.md#open-vs-closed-apis)
    1. [Controlling API Size](4_design.md#controlling-api-size)
    1. [Read-only Interfaces](4_design.md#read-only-interfaces)
    1. [Single-Responsibility Principle](4_design.md#single-responsibility-principle)
    1. [Loose vs. Tight Coupling](4_design.md#loose-vs-tight-coupling)
    1. [Methods vs. Properties](4_design.md#methods-vs-properties)
    1. [Code > Comments](4_design.md#code--comments)
1. [Safe Programming](5_safeProgramming.md)
    1. [Be Functional](5_safeProgramming.md#be-functional)
    1. [Avoid `null` references](5_safeProgramming.md#avoid-null-references)
    1. [Local variables](5_safeProgramming.md#local-variables)
    1. [Side Effects](5_safeProgramming.md#side-effects)
    1. [”Access to Modified Closure”](5_safeProgramming.md#access-to-modified-closure)
    1. ["Collection was modified; enumeration operation may not execute."](5_safeProgramming.md#collection-was-modified-enumeration-operation-may-not-execute)
    1. ["Possible multiple enumeration of IEnumerable"](5_safeProgramming.md#possible-multiple-enumeration-of-ienumerable)
1. [Error Handling](6_errorHandling.md)
    1. [Strategies](6_errorHandling.md#strategies)
    1. [Terms](6_errorHandling.md#terms)
    1. [Errors](6_errorHandling.md#errors)
    1. [Bugs](6_errorHandling.md#bugs)
    1. [Design-by-Contract](6_errorHandling.md#design-by-contract)
    1. [Throwing Exceptions](6_errorHandling.md#throwing-exceptions)
    1. [Catching Exceptions](6_errorHandling.md#catching-exceptions)
    1. [Defining Exceptions](6_errorHandling.md#defining-exceptions)
    1. [The Try* Pattern](6_errorHandling.md#the-try-pattern)
    1. [Error Messages](6_errorHandling.md#error-messages)
1. [Object Lifetime](7_objectLifetime.md)
    1. [`IDisposable`](7_objectLifetime.md#idisposable)
    1. [`Finalize`](7_objectLifetime.md#finalize)
    1. [Destructors](7_objectLifetime.md#destructors)
    1. [Best Practices](7_objectLifetime.md#best-practices)
1. [Managing Change](8_managingChange.md)
    1. [Modifying Interfaces](8_managingChange.md#modifying-interfaces)
    1. [Marking Members as Obsolete](8_managingChange.md#marking-members-as-obsolete)
    1. [Refactoring Names and Signatures](8_managingChange.md#refactoring-names-and-signatures)
    1. [Roadmap for Safe Obsolescence](8_managingChange.md#roadmap-for-safe-obsolescence)
1. [Documentation](9_documentation.md)
    1. [Files](9_documentation.md#files)
    1. [Language](9_documentation.md#language)
    1. [Style](9_documentation.md#style)
    1. [XML Documentation](9_documentation.md#xml-documentation)
    1. [Examples](9_documentation.md#examples)
1. [Miscellaneous](10_miscellaneous.md)
    1. [Generated Code](10_miscellaneous.md#generated-code)
    1. [Configuration and File System](10_miscellaneous.md#configuration-and-file-system)
    1. [Logging](10_miscellaneous.md#logging)
    1. [`ValueTask<T>`](10_miscellaneous.md#valuetaskt)
